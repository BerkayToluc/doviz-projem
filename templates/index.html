<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>DÃ¶viz ve AltÄ±n BorsasÄ±</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; text-align: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0px 10px 30px rgba(0,0,0,0.1); display: inline-block; width: 90%; max-width: 450px; }
        .kur-box { font-size: 22px; margin: 15px 0; padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .fiyat { font-weight: bold; color: #2c3e50; transition: all 0.4s ease; }
        h2 { color: #444; margin-bottom: 25px; font-size: 24px; border-bottom: 2px solid #f0b90b; display: inline-block; padding-bottom: 5px; }
        .altin-box { color: #b8860b; }
        .update-flash { color: #27ae60 !important; transform: scale(1.1); }
        .footer-note { font-size: 12px; color: #888; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h2>DÃ¶viz KurlarÄ±</h2>

    <div class="kur-box">
        <span>ğŸ‡ºğŸ‡¸ USD/TRY</span>
        <span class="fiyat" id="fiyat-USD">{{ kurlar.USD }} â‚º</span>
    </div>
    <div class="kur-box">
        <span>ğŸ‡ªğŸ‡º EUR/TRY</span>
        <span class="fiyat" id="fiyat-EUR">{{ kurlar.EUR }} â‚º</span>
    </div>
    <div class="kur-box">
        <span>ğŸ‡¬ğŸ‡§ GBP/TRY</span>
        <span class="fiyat" id="fiyat-GBP">{{ kurlar.GBP }} â‚º</span>
    </div>

    <h2 style="margin-top: 30px;">AltÄ±n FiyatlarÄ±</h2>
    <div class="kur-box altin-box">
        <span>ğŸŸ¡ Gram AltÄ±n</span>
        <span class="fiyat" id="fiyat-GRAM">{{ altin_fiyatlari.GRAM }} â‚º</span>
    </div>
    <div class="kur-box altin-box">
        <span>ğŸŒ Ons AltÄ±n</span>
        <span class="fiyat" id="fiyat-ONS">${{ altin_fiyatlari.ONS }}</span>
    </div>

    <div class="footer-note">Fiyatlar her 10 saniyede bir canlÄ± gÃ¼ncellenir.</div>
</div>

<script>
    function verileriTazele() {
        fetch('/api/fiyatlar')
            .then(res => res.json())
            .then(data => {
                const map = {
                    'fiyat-USD': data.kurlar.USD + " â‚º",
                    'fiyat-EUR': data.kurlar.EUR + " â‚º",
                    'fiyat-GBP': data.kurlar.GBP + " â‚º",
                    'fiyat-GRAM': data.altin.GRAM + " â‚º",
                    'fiyat-ONS': "$" + data.altin.ONS
                };

                for (let id in map) {
                    let el = document.getElementById(id);
                    if (el && el.innerText !== map[id]) {
                        el.innerText = map[id];
                        el.classList.add('update-flash');
                        setTimeout(() => el.classList.remove('update-flash'), 700);
                    }
                }
            })
            .catch(err => console.error("GÃ¼ncelleme hatasÄ±:", err));
    }
    setInterval(verileriTazele, 10000);
</script>

</body>
</html>